{% extends 'movie/base.html' %}
{% block 'menu_button' %}
    <a class="mainMenu__item movieMain__back fadeAnimator__ancor" href="{% url 'movie:main' %}">
    </a>
{% endblock %}
{% block 'main_content' %}
    {% regroup object_list by date|date:"j E" as date_list %}
    <article
        class="calendarPage">
        <div class="calendarPage__list">
            {% for date_info in date_list %}
            <dl class="calendarPage__item">
                <dt class="calendarPage__date">
                    <time>
                        {% if date_info.grouper == now_date|date:"j E" %}
                            Сегодня
                        {% else %}
                            {{ date_info.grouper }}
                        {% endif %}
                    </time>
                </dt>
                {% for screening in date_info.list %}
                <dd class="calendarPage__desc">
                    <a 
                        class="calendarPage__wrapper"
                        href="{% url 'movie:detail' slug=screening.show.slug %}">
                        <time class="calendarPage__time">{{ screening.date|date:"H:i" }}</time>
                        <div class="calendarPage__info">Подробнее</div>
                        <div 
                            class="calendarPage__img"
                            style="background-image: url({{ screening.show.image.url }})">
                            <img 
                                class="calendarPage__image"
                                src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="/>
                        </div>
                    </a>
                </dd>
                {% endfor %}
            </dl>
            {% endfor %}
        </div>
    </article>
    <div 
        mesto-feedback-item="mobileFilterMenu"
        class="movieMobileMenu">
        <div mesto-feedback-close="mobileFilterMenu" class="movieMobileMenu__close">
            {% include 'mesto/inc/black_cross.svg' %}
        </div>
        <div class="movieMobileMenu__list short">
            <dl class="customSelect" mesto-custom-select>
                <dt
                    mesto-custom-select-placeholder
                    class="customSelect__placeholder"
                    alt="0">
                    Выберите жанр
                </dt>
                <dd class="customSelect__list">
                {% for genre in genre_list %}
                    <li 
                        mesto-custom-select-item
                        class="customSelect__item">
                        <input
                            ng-model="select.genre"
                            type="radio"
                            id="genre{{ genre.id }}"
                            ng-value="{{ genre.id }}"/>
                        <label
                            class="customSelect__label"
                            for="genre{{ genre.id }}">
                            {{ genre.title }}
                        </label>
                    </li>
                {% endfor %}
                </dd>
            </dl>
            <dl class="customSelect" mesto-custom-select>
                <dt
                    mesto-custom-select-placeholder
                    class="customSelect__placeholder"
                    alt="1">
                    Выберите год
                </dt>
                <dd class="customSelect__list">
                    <li 
                        mesto-custom-select-item
                        class="customSelect__item">
                        <input
                            ng-model="select.year"
                            type="radio"
                            id="year2015"
                            ng-value="2015"/>
                        <label
                            class="customSelect__label"
                            for="year2015">
                            2015
                        </label>
                    </li>
                </dd>
            </dl>
            <dl class="customSelect" mesto-custom-select>
                <dt
                    mesto-custom-select-placeholder
                    class="customSelect__placeholder"
                    alt="2">
                    Выбрать рейтинг
                </dt>
                <dd class="customSelect__list">
                    <li 
                        mesto-custom-select-item
                        class="customSelect__item">
                        <input
                            ng-model="select.raiting"
                            type="radio"
                            id="rating8"
                            ng-value="8.2"/>
                        <label
                            class="customSelect__label"
                            for="rating8.2">
                            8.2
                        </label>
                    </li>
                </dd>
            </dl>
        </div>
    </div>
    <div 
        mesto-feedback-item="mobileMenu"
        class="movieMobileMenu">
        <div mesto-feedback-toggle="mobileMenu" class="movieMobileMenu__close">
            {% include 'mesto/inc/black_cross.svg' %}
        </div>
        <ul class="movieMobileMenu__list">
            <li class="movieMobileMenu__item">
                <a 
                    class="movieMobileMenu__ancor"
                    href="{% url 'movie:calendar' %}">
                    Сегодня в кино
                 </a>
            </li>
            <li class="movieMobileMenu__item">
                <a 
                    class="movieMobileMenu__ancor"
                    href="{% url 'movie:calendar' %}">
                    Скоро в кино
                </a>
            </li>
            <li class="movieMobileMenu__item">
                <a
                    class="movieMobileMenu__ancor"
                    href="{% url 'movie:catalog' %}">
                    Каталог фильмов
                 </a>
            </li>
            <li class="movieMobileMenu__item">
                <a
                    class="movieMobileMenu__ancor"
                    href="{% url 'movie:archive' %}">
                    Архиф фильмов
                 </a>
            </li>
            <li class="movieMobileMenu__item">
                <a
                    class="movieMobileMenu__ancor"
                    href="{% url 'movie:about' %}">
                    О кинотеатре
                 </a>
            </li>
        </ul>
    </div>
{% endblock %}
    {% block footer %}
        <footer class="movieFooter">
            <menu
                mesto-feedback-toggle="mobileMenu"
                class="movieFooter__menu">
                <a class="movieFooter__item">Скоро в кино</a>
            </menu>
            <menu
                mesto-feedback-toggle="mobileFilterMenu"
                class="movieFooter__socialList">
                <a class="movieFooter__social options"></a>
            </menu>
        </footer>
    {% endblock %}
